import ComImg from '@/components/mdx/constituents/utils/commonImg/index.jsx'
import epImg from '@/assets/images/ep.jpg'
import redshiftImg from '@/assets/images/redshift.jpg'
import RiemannSurfaceImg from '@/assets/images/Riemann-surface.png'
import ChartCoverAnOpenSubsetImg from '@/assets/images/chart-subset.png'
import OverlappingCoordinateChartsImg from '@/assets/images/overlapping-coordinate-charts.png'

# Manifolds

## Gravity as geometry

* The **WEP(Weak Equivalence Principle)** can be stated as follows: *The motion of freely-falling particels are the same in a gravitational field and a uniformly accelerated frame, in small enough regions of spacetime*.

* The **EEP(Einstein Equivalence Principle)** can be stated as follows: *In small enough regions of spacetime, the laws of physics reduce to those of specical relativity; it is impossible to detect the existence of a gravitational feild by means of local experiments*.

  <ComImg alt="等效原理" src={ epImg }></ComImg>

  ### 用Einstein等效原理计算引力红移

  <ComImg alt="地球表面的引力红移效应" src={ redshiftImg } width="300"></ComImg>

* 在接近地球表面的地方，引力可以看作是均匀的；根据EEP，上图中产生的效应可以等效地理解为：在远离引力场的平坦时空中，两架相距`z`的飞船正在做匀加速度为$a_{g}$的运动，位于后边
的飞船向前方的飞船发射一束波长为$\lambda_{0}$的电磁波；前方飞船接收到的电磁波波长与电磁波发射时的波长相差$\Delta \lambda$；

  由多普勒效应有：
  $$
  \begin{gather}
  \frac{\Delta\lambda}{\lambda_{0}} = \frac{\Delta v}{c} = \frac{a_{g}z}{c^{2}}
  \end{gather}
  $$

  或者更一般地，假设引力场沿着z方向是变化的，则有瞬时加速度$a_{g}$等于牛顿引力势（Nuwtonian potential）$\nabla \Phi$，
  $$
  \begin{gather}
    \frac{\Delta\lambda}{\lambda_{0}} = \frac{\Delta v}{c} = \frac{1}{c} \int \nabla \Phi dt, \\
    \partial_{x} \Phi = \partial_{x} \Phi = 0, \\
    dz = cdt
  \end{gather}
  $$
  得到，
  $$
  \begin{gather}
    \frac{\Delta\lambda}{\lambda_{0}} = \frac{\Delta v}{c} = \frac{1}{c^{2}} \int \partial_{z} \Phi dz = \Delta \Phi
  \end{gather}
  $$
  其中这里设光速$c=1$；因此可以看到光束的波长的变化由引力势的变化决定。

## What is manifold?

* The entire manifold(have a complicated topology) is constructed by smoothly sewing together local regoins that just 
look like flat $\R^{n}$. **A crucial point is that the dimensionality $n$ of the Euclidean spaces being used must be the 
same in every patch of the manifold**; we then say that the manifold is of dimension $n$. With this approach we can analyze 
functions on such a space by converting them (locally) to functions in a Euclidean space.

  Examples: 

  * $\R^{n}$ itself
  * The n-sphere, $S^{n}$
  * A Riemann surface of genus $g$.
  <ComImg alt="Riemann Surface of genus g" src={ RiemannSurfaceImg }></ComImg>
  * The direct product of two manifolds is a manifold. That is, given manifolds $M$ and $M^{\prime}$ of dimension $n$ and 
  $n^{\prime}$, we can construct a manifold $M \times M^{\prime}$ of dimension $n + n^{\prime}$, consisting of ordered 
  pairs $(p, p^{\prime})$ with $p \in M$ and $p^{\prime} \in M^{\prime}$

* A map $\phi$ is called **one-to-one** if each element of $N$ has at most one element of $M$ mapped into it, and **onto** 
if each element of $\Nu$ has at least one element of $\Mu$ mapped into it.

* Maps in more general Euclidean spaces, $\phi$ : $\R^{m} \to \R^{n}$. A map from $\R^{m}$ to $\R^{n}$ takes an m-tuple
$(x^1, x^2, ..., x^m)$ to an n-tuple $(x^1, x^2, ..., x^n)$, and can therefore be thought of as a collection of n 
functions $\phi^i$ of m variables: 
  $$
  \begin{gather}
    y^1 = \phi^1(x^1, x^2, ..., x^m) \\
    y^2 = \phi^2(x^1, x^2, ..., x^m) \\
    \vdots \\
    y^n = \phi^n(x^1, x^2, ..., x^m). \\
  \end{gather}
  $$

  And refer to the entire map $\phi$ : $\R^{m} \to \R^{n}$ as $\cnums^p$ if each of its component functions are at least 
$\cnums^p$. $\cnums^{\infty}$ maps are sometimes called smooth.

* We will call two set $M$ and $N$ **diffeomorphic** if there exists a $\cnums^{\infty}$ map $\phi$ : $\R^{m} \to \R^{n}$ 
with a $\cnums^{\infty}$ inverse map $\phi^{-1}$ : $\R^{n} \to \R^{m}$; the map $\phi$ is then called a diffeomorphism(微分同胚).

* A **chart** or **coordinate system** consists of a subset $U$ of a set $M$, along with a one-to-one map $\phi : U \to \R^{n}$, 
such that the image $\phi(U)$ is open in $\R^{n}$, written as $(U, \phi)$. Any map is onto its image, so the map $\phi : U \to \phi(U)$ 
is invertible if it is one-to-one. We can then say that $U$ is a open subset in $M$.
<ComImg alt="A coordinate chart covering an open subset U of M" src={ ChartCoverAnOpenSubsetImg }></ComImg>

* A $\cnums^p$ **atlas** is an indexed collection of charts $\{(U_{\alpha}, \phi_{\alpha})\}$ that satisfies two conditions: 
  1. The union of the $U_{\alpha}$ is equal to $M$; that is, the $\{U_{\alpha}\}$ cover $M$.
  2. The charts are smoothly sewn together. More precisely, if two charts overlap, $U_{\alpha} \cap U_{\beta} \neq \emptyset$, 
  then the map $(\phi_{\alpha} \circ \phi_{\beta}^{-1})$ takes points in $\phi_{\beta}(U_{\alpha} \cap U_{\beta}) \sub \R^n$ 
  onto $\phi_{\alpha}(U_{\alpha} \cap U_{\beta}) \sub \R^n$, and all of these maps must be $\cnums^{\infty}$ where they are 
  defined.
  <ComImg alt="Overlapping coordinate charts" src={ OverlappingCoordinateChartsImg }></ComImg>

* It is not necessary to believe, for example, that four-dimensional spacetime is stuck in some larger space. On the other hand, 
it might be; we really do not know.

* Why was it necessary to be so finicky about charts and their overlays, rather than just covering every mainfold with a single chart? 
Because most mainfolds cannot be covering with just one chart. A somewhat complicated example is provided by $S^{2}$($P_{61}$ for more).

## Tangent Space

* The tangent space is a set of all vectors at a single point in spacetime.

* Define $\mathcal{F}$ to be the space of all smooth functions on $M$ (that is, $C^{\infty}$ maps $f$: $M \to R$). Then we notice that 
each curve through $p$ defines an operator on this space, the directional derivative, which maps $f \to df/d\lambda$(at p). We will 
make the following claim: **the tangent space $T^{p}$ can be identified with the space of directional derivative operator along curves 
through $p$**. To establish this idea we must demonstrate two things: first, that the space of directional derivative is a vector space. 
and second that it is the vector space we want(it has the same dimensionality as $M$, yields a natural idea of a vector pointing along a 
certain direction, and so on).

* The easitest way to convince that the vector space at $p$ is identified with the tangent space is to find a basis for the space.

* **On a curved manifold, a coordinate basis will never be orthonormal throughout a neighborhood of any point where the curvature 
dose not vanish.**

## Tensor

* **A ($k$, $l$) tensor is a multilinear map from a collection of $k$ dual vectors and $l$ vectors to $\R$**. Its components
in a coordinate basis can be obtained by acting the tensor on basis one-forms and vectors,
  $$
  \begin{gather}
    T^{\mu_1...\mu_k}_{\phantom{\:\nu_1...\nu_k}\nu_1...\nu_k} = T(dx^{\mu_1},...,dx^{\mu_k},\partial_{\nu_1},...,\partial_{\nu_l}).
  \end{gather}
  $$
  The transformation law for general tensors follows the same pattern of replacing the Lorentz transformation matrix used in flat space
with a matrix representing more general coordinate transformations:
  $$
  \begin{gather}
    T^{\mu^\prime_1...\mu^\prime_k}_{\phantom{\:\nu_1...\nu_k}\nu^\prime_1...\nu^\prime_k}
    = \frac{\partial x^{\mu^\prime_1}}{\partial x^{\mu_1}}...
    \frac{\partial x^{\mu^\prime_k}}{\partial x^{\mu_k}}
    \frac{\partial x^{\nu_1}}{\partial x^{\nu^\prime_1}}...
    \frac{\partial x^{\nu_l}}{\partial x^{\nu^\prime_l}}
    T^{\mu_1...\mu_k}_{\phantom{\:\nu_1...\nu_k}\nu_1...\nu_k}.
  \end{gather}
  $$

## Metric

* In fact, **there always exits a coordinate system on any flat space in which the metric is constant**. But we might not know how 
to find such a coordinate system, and there are many ways for a space to deviate from flatness; we will therefore want a more 
precise characterization of the curvature.

* 具有常数分量的度规是判断一个`space`是平直的充分条件。

* We will always deal with continuous, nondegenerate metric. If all of the signs are positive, the metric is called **Euclidean** or 
**Riemannian**, while if there is a single minus it is called **Lorentzian** or **pseudo-Riemannian**, and any metric with some $+1$'s 
and some $-1$'s is called indefinite.

* Many physical questions can be cast as an initial-value problem: given the state of a sysytem at some moment in time, what will be 
the state at some latter time? The fact that such questions have definite answers is due to causality, the idea that future events can 
be understood as consequences of initial conditions plus the laws of physics. Initial-value problems are as common in GR as in Newtonian 
physics or specical relativity.

## Tensor Densities

* The completely antisymmetric Levi-civita symbol, defined as
  $$
  \begin{gather}
    \tilde{\epsilon}_{\mu_1\mu_2...\mu_n} = 
    \begin{cases}
      +1 &\text{if } \mu_1\mu_2...\mu_n \text{ is an even permutation of }01...(n-1), \\
      -1 &\text{if } \mu_1\mu_2...\mu_n \text{ is an odd permutation of }01...(n-1), \\
      0 &\text{otherwise}.
    \end{cases}
  \end{gather}
  $$
  This is called a "symbol" because it is not a tensor and not obeying the general coordinate transformation law. Its behavior can be 
  related to that of an ordinary tensor by first nothing that, given any $n \times n$ matrix
  $M^{\mu}_{\phantom{\:\mu^{\prime}}\mu^{\prime}}$, the determinant 
  $|M|$ obeys
  $$
  \begin{gather}
    \tilde{\epsilon}_{\mu^{\prime}_1\mu^{\prime}_2...\mu^{\prime}_n}|M| = 
    \tilde{\epsilon}_{\mu_1\mu_2...\mu_n}
    M^{\mu_1}_{\phantom{\:\mu^{\prime}_1}\mu^{\prime}_1}
    M^{\mu_2}_{\phantom{\:\mu^{\prime}_2}\mu^{\prime}_2}...
    M^{\mu_n}_{\phantom{\:\mu^{\prime}_n}\mu^{\prime}_n}.
  \end{gather}
  $$
  It follows that, setting $M^{\mu}_{\phantom{\:\mu^{\prime}}\mu^{\prime}} = \partial x^{\mu} / \partial x^{\mu^{\prime}}$
  $$
  \begin{gather}
    \tilde{\epsilon}_{\mu^{\prime}_1\mu^{\prime}_2...\mu^{\prime}_n} = 
    \bigg\lvert \frac{\partial x^{\mu^{\prime}}}{\partial x^{\mu}} \bigg\rvert
    \tilde{\epsilon}_{\mu_1\mu_2...\mu_n}
    \frac{\partial x^{\mu_1}}{\partial x^{\mu_1^{\prime}}}
    \frac{\partial x^{\mu_2}}{\partial x^{\mu_2^{\prime}}}...
    \frac{\partial x^{\mu_n}}{\partial x^{\mu_n^{\prime}}}.
  \end{gather}
  $$
  So Levi-Civita symbol transforms in a way close to the tensor transformation law, except for the determinant out front. 
  Objects transforming in this way are known as  **tensor densities**. Another example is given by the determinant of the 
  metric, $g = |g_{\mu\nu}|$
  $$
  \begin{gather}
    g(x^{\mu^\prime}) = \bigg\lvert \frac{\partial x^{\mu^{\prime}}}{\partial x^{\mu}} \bigg\rvert^{-2} g(x^{\mu}).
  \end{gather}
  $$
  With this we can define the Levi-Civita tensor as 
  $$
  \begin{gather}
    \epsilon_{\mu_1\mu_2...\mu_n} = \sqrt{|g|}\tilde{\epsilon}_{\mu_1\mu_2...\mu_n}.
  \end{gather}
  $$

## Differential Form

* A differential $p$-form is simply a $(0, p)$ tensor that is completely anti-symmetric. The space of all $p$-forms is 
denoted $\Lambda^p$, and the space of all $p$-form fields over a mainfold $M$ is denoted $\Lambda^p(M)$

* The number of linearly independent $p$-forms on an n-demensional vector space is $n!/(p!(n-p)!)$; The basic idea is 
that forms can be both differential and integrated, without the help of any additional geometric structure

* Given a $p$-form $A$ and a $q$-form $B$, we can form a $(p+q)$-form known as the **wedge product** $A \wedge B$ by 
taking the antisymmetrized tensor product
  $$
  \begin{gather}
    (A \wedge B)_{\mu_1...\mu_{p+q}}=\frac{(p+q)!}{p!q!}A_{\lbrack\mu_1...\mu_p}B_{\mu_{p+1}...\mu_{p+q}\rbrack}
  \end{gather}
  $$
  For example, the wedge product of two $1$-form is
  $$
  \begin{gather}
    (A \wedge B)_{\mu_\nu}=2A_{\lbrack\mu}B_{\nu\rbrack}=A_{\mu}B_{\nu}-B_{\nu}A_{\mu}
  \end{gather}
  $$
  Then we can explore some features of the wedge product of basic dual vector. First, we can see that the wedge product 
  of two basic dual vectors($1$-form) is
  $$
  \begin{gather}
    dx^{\mu} \wedge dx^{\nu}=2dx^{\lbrack\mu}dx^{\nu\rbrack}=dx^{\mu} \otimes dx^{\nu} - dx^{\nu} \otimes dx^{\mu}
  \end{gather}
  $$
  Then that the wedge product of three basic dual vectors is
  $$
  \begin{gather}
    dx^{\mu} \wedge dx^{\nu} \wedge dx^{\rho}=(dx^{\mu} \wedge dx^{\nu}) \wedge dx^{\rho}
    =3!dx^{\lbrack\mu}dx^{\nu}dx^{\rho\rbrack}
  \end{gather}
  $$
  In the same way, the n-dual-vector's wedge product is
  $$
  \begin{gather}
    dx^{\mu_1} \wedge dx^{\mu_2} \wedge ... \wedge dx^{\mu_n}=n!dx^{\lbrack\mu_1}dx^{\mu_2}...dx^{\mu_n\rbrack}
  \end{gather}
  $$
  One should note that, for any three differential forms it is
  $$
  \begin{gather}
    A \wedge B \wedge C=\frac{(n+m+l)!}{n!m!l!}A_{\lbrack\mu_1...\mu_n}B_{\nu_1...\nu_m}C_{\rho_1...\rho_l\rbrack}
  \end{gather}
  $$
  And
  $$
  \begin{gather}
    A \wedge B = (-1)^{pq}B \wedge A
  \end{gather}
  $$
  So we can alter the order of a wedge product if we are careful with signs

* (Difinition)The exterior derivative d allows us to differentiate $p$-form fields to obtain $p+1$-form fields
  $$
  \begin{gather}
    (dA)_{\mu_1...\mu_{p+1}}=(p+1)\partial_{\lbrack\mu_1}A_{\mu_2...\mu_{p+1}\rbrack}
  \end{gather}
  $$
  and exterior derivative obey a modified version of the Leibniz rule when applied to the product of a
  $p$-form $\omega$ and $q$-form $\eta$: 
  $$
  \begin{gather}
    d(\omega \wedge \eta) = (d\omega) \wedge \eta + (-1)^p \omega \wedge (d\eta)
  \end{gather}
  $$
  It is note that the exterior dirivative is a legitimate tendor operator. The partial derivative, however, is not 
  a tensor operator and we will see that the covariant dirivative is closer to what we might think of as the extension 
  of the partial derivative to abitrary mainfolds

* Another interesting thing about exterior dirivative is that, for any forms
  $$
  \begin{gather}
  d(dA) = 0
  \end{gather}
  $$
