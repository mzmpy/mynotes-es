import{a as B,b as S,c as X}from"https://mzmpy.github.io/mynotes-es/chunks/js/chunk-IKRLYDKX.js";import{a as C}from"https://mzmpy.github.io/mynotes-es/chunks/js/chunk-ZH6BUNSG.js";import{I as h,N as A,ba as u,d as q,f as n,g as r,qa as s,ya as R,z as b}from"https://mzmpy.github.io/mynotes-es/chunks/js/chunk-6MPDC5UM.js";r();R();r();r();r();R();var e=q(B(),1);r();var I={"map-container":{name:"src__components__mdx__constituents__leaflet__canvas-radar__index-SUENqW-map-container",composes:[],isReferenced:!1}},U=(o=>t=>{if(typeof t!="string")throw new TypeError("resolveStyles: parameter 'className' must be a string.");return o[t.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())].name})(I);var E=h({name:"CanvasRadar",setup(){let o=b(),t=[39.910088,116.401601],a,c,f;return A(()=>{a=e.map(o.value,{zoom:12,center:t,zoomAnimation:!0}),e.tileLayer.chinaProvider("GaoDe.Normal.Map",{minZoom:3,maxZoom:18}).addTo(a),e.marker(t).addTo(a);let v=S({container:document.createElement("canvas"),padding:0,minZoom:1,maxZoom:18,opacity:.5});v.on("layer-render",function(){console.log("======= layer render =======",c),c&&e.Util.cancelAnimFrame(c);let m=this.getContainer(),i=m.getContext("2d"),w=e.Browser.retina?2:1,g=this._bounds.getSize(),M=e.Browser.retina?2:1;m.width=w*g.x,m.height=w*g.y,m.style.width=g.x+"px",m.style.height=g.y+"px",e.Browser.retina&&i.scale(M,M);let _=[t[1],t[0]],P=X(_,5e3,0,{units:"meters"}).geometry.coordinates,l=a.latLngToContainerPoint({lat:_[1],lng:_[0]}),z=a.latLngToContainerPoint({lat:P[1],lng:P[0]}).distanceTo(l),F=(d=0)=>{i.clearRect(0,0,m.width,m.height);let D=0+Math.PI/180*d,x=Math.PI/180*(120+d),y=100;for(let p=0;p<y;p++)i.beginPath(),i.fillStyle=`rgba(80, 122, 252, ${1-(p+1)/y})`,i.moveTo(l.x,l.y),i.arc(l.x,l.y,z,x-(x-D)/y*(p+1),x-(x-D)/y*p,!1),i.fill(),i.closePath()},T=d=>{f=f||d,F((d-f)/5),c=e.Util.requestAnimFrame(T)};c=e.Util.requestAnimFrame(T)}),v.addTo(a)}),()=>s(u,null,s("div",{class:U("map-container"),ref:o}))}});function Z(o){let t=Object.assign({h1:"h1"},C(),o.components);return n.h(n.Fragment,null,n.h(t.h1,null,"canvas\u96F7\u8FBE\u626B\u63CF\u56FE"),`
`,n.h(E))}function N(o={}){let{wrapper:t}=Object.assign({},C(),o.components);return t?n.h(t,o,n.h(Z,o)):Z(o)}var L=N;var ct=h({name:"MDX_CANVAS\u96F7\u8FBE\u626B\u63CF\u56FE",components:{MDXComponentContext:L},setup(o,t){return()=>s("div",{class:"markdown-body",style:"padding: 15px;"},s(L,{...t?.attrs}))}});export{ct as default};
