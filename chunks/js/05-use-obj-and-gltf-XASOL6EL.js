import{a as g0,b as b0}from"./chunk-ZT334OZW.js";import{A as l0,B as c0,C as P,D as X,E as S,F as I,H as F,J as h0,K as H,L as z,M as U,N as p0,P as u0,Q as m0,U as d0,c as e0,e as s0,f as T,g as i0,h as O,k as q,m as k,p as C,q as J,s as R,t as W,u as V,w as r0,y as o0,z as a0}from"./chunk-PSTP36CY.js";import"./chunk-NIX3CF7H.js";import{a as K}from"./chunk-LNJVFRMH.js";import{J as A,N as f0,_ as E,d as u,e as x,na as L,va as n0,x as v0,y as t0}from"./chunk-OXERZ7B4.js";x();n0();x();x();x();n0();x();var R0={"gl-canvas":{name:"src__components__mdx__constituents__threejs__use-obj-and-gltf__windmill__index-DiiN-q-gl-canvas",composes:[],isReferenced:!1}},w0=(g=>v=>{if(typeof v!="string")throw new TypeError("resolveStyles: parameter 'className' must be a string.");return g[v.replace(/[A-Z]/g,f=>"-"+f.toLowerCase())].name})(R0);x();var k0=/^[og]\s*(.+)?/,F0=/^mtllib /,T0=/^usemtl /,V0=/^usemap /,y0=/\s+/,x0=new k,Z=new k,_0=new k,L0=new k,_=new k,B=new C;function S0(){let g={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(v,f){if(this.object&&this.object.fromDeclaration===!1){this.object.name=v,this.object.fromDeclaration=f!==!1;return}let e=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:v||"",fromDeclaration:f!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,n){let a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);let r={index:this.materials.length,name:t||"",mtllib:Array.isArray(n)&&n.length>0?n[n.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(i){let s={index:typeof i=="number"?i:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return s.clone=this.clone.bind(s),s}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){let n=this.currentMaterial();if(n&&n.groupEnd===-1&&(n.groupEnd=this.geometry.vertices.length/3,n.groupCount=n.groupEnd-n.groupStart,n.inherited=!1),t&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return t&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),n}},e&&e.name&&typeof e.clone=="function"){let t=e.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(v,f){let e=parseInt(v,10);return(e>=0?e-1:e+f/3)*3},parseNormalIndex:function(v,f){let e=parseInt(v,10);return(e>=0?e-1:e+f/3)*3},parseUVIndex:function(v,f){let e=parseInt(v,10);return(e>=0?e-1:e+f/2)*2},addVertex:function(v,f,e){let t=this.vertices,n=this.object.geometry.vertices;n.push(t[v+0],t[v+1],t[v+2]),n.push(t[f+0],t[f+1],t[f+2]),n.push(t[e+0],t[e+1],t[e+2])},addVertexPoint:function(v){let f=this.vertices;this.object.geometry.vertices.push(f[v+0],f[v+1],f[v+2])},addVertexLine:function(v){let f=this.vertices;this.object.geometry.vertices.push(f[v+0],f[v+1],f[v+2])},addNormal:function(v,f,e){let t=this.normals,n=this.object.geometry.normals;n.push(t[v+0],t[v+1],t[v+2]),n.push(t[f+0],t[f+1],t[f+2]),n.push(t[e+0],t[e+1],t[e+2])},addFaceNormal:function(v,f,e){let t=this.vertices,n=this.object.geometry.normals;x0.fromArray(t,v),Z.fromArray(t,f),_0.fromArray(t,e),_.subVectors(_0,Z),L0.subVectors(x0,Z),_.cross(L0),_.normalize(),n.push(_.x,_.y,_.z),n.push(_.x,_.y,_.z),n.push(_.x,_.y,_.z)},addColor:function(v,f,e){let t=this.colors,n=this.object.geometry.colors;t[v]!==void 0&&n.push(t[v+0],t[v+1],t[v+2]),t[f]!==void 0&&n.push(t[f+0],t[f+1],t[f+2]),t[e]!==void 0&&n.push(t[e+0],t[e+1],t[e+2])},addUV:function(v,f,e){let t=this.uvs,n=this.object.geometry.uvs;n.push(t[v+0],t[v+1]),n.push(t[f+0],t[f+1]),n.push(t[e+0],t[e+1])},addDefaultUV:function(){let v=this.object.geometry.uvs;v.push(0,0),v.push(0,0),v.push(0,0)},addUVLine:function(v){let f=this.uvs;this.object.geometry.uvs.push(f[v+0],f[v+1])},addFace:function(v,f,e,t,n,a,r,i,s){let c=this.vertices.length,o=this.parseVertexIndex(v,c),h=this.parseVertexIndex(f,c),l=this.parseVertexIndex(e,c);if(this.addVertex(o,h,l),this.addColor(o,h,l),r!==void 0&&r!==""){let m=this.normals.length;o=this.parseNormalIndex(r,m),h=this.parseNormalIndex(i,m),l=this.parseNormalIndex(s,m),this.addNormal(o,h,l)}else this.addFaceNormal(o,h,l);if(t!==void 0&&t!==""){let m=this.uvs.length;o=this.parseUVIndex(t,m),h=this.parseUVIndex(n,m),l=this.parseUVIndex(a,m),this.addUV(o,h,l),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(v){this.object.geometry.type="Points";let f=this.vertices.length;for(let e=0,t=v.length;e<t;e++){let n=this.parseVertexIndex(v[e],f);this.addVertexPoint(n),this.addColor(n)}},addLineGeometry:function(v,f){this.object.geometry.type="Line";let e=this.vertices.length,t=this.uvs.length;for(let n=0,a=v.length;n<a;n++)this.addVertexLine(this.parseVertexIndex(v[n],e));for(let n=0,a=f.length;n<a;n++)this.addUVLine(this.parseUVIndex(f[n],t))}};return g.startObject("",!1),g}var D=class extends H{constructor(v){super(v),this.materials=null}load(v,f,e,t){let n=this,a=new z(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(v,function(r){try{f(n.parse(r))}catch(i){t?t(i):console.error(i),n.manager.itemError(v)}},e,t)}setMaterials(v){return this.materials=v,this}parse(v){let f=new S0;v.indexOf(`\r
`)!==-1&&(v=v.replace(/\r\n/g,`
`)),v.indexOf(`\\
`)!==-1&&(v=v.replace(/\\\n/g,""));let e=v.split(`
`),t=[];for(let r=0,i=e.length;r<i;r++){let s=e[r].trimStart();if(s.length===0)continue;let c=s.charAt(0);if(c!=="#")if(c==="v"){let o=s.split(y0);switch(o[0]){case"v":f.vertices.push(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])),o.length>=7?(B.setRGB(parseFloat(o[4]),parseFloat(o[5]),parseFloat(o[6])).convertSRGBToLinear(),f.colors.push(B.r,B.g,B.b)):f.colors.push(void 0,void 0,void 0);break;case"vn":f.normals.push(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]));break;case"vt":f.uvs.push(parseFloat(o[1]),parseFloat(o[2]));break}}else if(c==="f"){let h=s.slice(1).trim().split(y0),l=[];for(let p=0,b=h.length;p<b;p++){let w=h[p];if(w.length>0){let y=w.split("/");l.push(y)}}let m=l[0];for(let p=1,b=l.length-1;p<b;p++){let w=l[p],y=l[p+1];f.addFace(m[0],w[0],y[0],m[1],w[1],y[1],m[2],w[2],y[2])}}else if(c==="l"){let o=s.substring(1).trim().split(" "),h=[],l=[];if(s.indexOf("/")===-1)h=o;else for(let m=0,p=o.length;m<p;m++){let b=o[m].split("/");b[0]!==""&&h.push(b[0]),b[1]!==""&&l.push(b[1])}f.addLineGeometry(h,l)}else if(c==="p"){let h=s.slice(1).trim().split(" ");f.addPointGeometry(h)}else if((t=k0.exec(s))!==null){let o=(" "+t[0].slice(1).trim()).slice(1);f.startObject(o)}else if(T0.test(s))f.object.startMaterial(s.substring(7).trim(),f.materialLibraries);else if(F0.test(s))f.materialLibraries.push(s.substring(7).trim());else if(V0.test(s))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(t=s.split(" "),t.length>1){let h=t[1].trim().toLowerCase();f.object.smooth=h!=="0"&&h!=="off"}else f.object.smooth=!0;let o=f.object.currentMaterial();o&&(o.smooth=f.object.smooth)}else{if(s==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+s+'"')}}f.finalize();let n=new a0;if(n.materialLibraries=[].concat(f.materialLibraries),!(f.objects.length===1&&f.objects[0].geometry.vertices.length===0)===!0)for(let r=0,i=f.objects.length;r<i;r++){let s=f.objects[r],c=s.geometry,o=s.materials,h=c.type==="Line",l=c.type==="Points",m=!1;if(c.vertices.length===0)continue;let p=new W;p.setAttribute("position",new R(c.vertices,3)),c.normals.length>0&&p.setAttribute("normal",new R(c.normals,3)),c.colors.length>0&&(m=!0,p.setAttribute("color",new R(c.colors,3))),c.hasUVIndices===!0&&p.setAttribute("uv",new R(c.uvs,2));let b=[];for(let y=0,N=o.length;y<N;y++){let j=o[y],$=j.name+"_"+j.smooth+"_"+m,d=f.materials[$];if(this.materials!==null){if(d=this.materials.create(j.name),h&&d&&!(d instanceof P)){let M=new P;J.prototype.copy.call(M,d),M.color.copy(d.color),d=M}else if(l&&d&&!(d instanceof S)){let M=new S({size:10,sizeAttenuation:!1});J.prototype.copy.call(M,d),M.color.copy(d.color),M.map=d.map,d=M}}d===void 0&&(h?d=new P:l?d=new S({size:1,sizeAttenuation:!1}):d=new F,d.name=j.name,d.flatShading=!j.smooth,d.vertexColors=m,f.materials[$]=d),b.push(d)}let w;if(b.length>1){for(let y=0,N=o.length;y<N;y++){let j=o[y];p.addGroup(j.groupStart,j.groupCount,y)}h?w=new X(p,b):l?w=new I(p,b):w=new V(p,b)}else h?w=new X(p,b[0]):l?w=new I(p,b[0]):w=new V(p,b[0]);w.name=s.name,n.add(w)}else if(f.vertices.length>0){let r=new S({size:1,sizeAttenuation:!1}),i=new W;i.setAttribute("position",new R(f.vertices,3)),f.colors.length>0&&f.colors[0]!==void 0&&(i.setAttribute("color",new R(f.colors,3)),r.vertexColors=!0);let s=new I(i,r);n.add(s)}return n}};x();var G=class extends H{constructor(v){super(v)}load(v,f,e,t){let n=this,a=this.path===""?m0.extractUrlBase(v):this.path,r=new z(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(v,function(i){try{f(n.parse(i,a))}catch(s){t?t(s):console.error(s),n.manager.itemError(v)}},e,t)}setMaterialOptions(v){return this.materialOptions=v,this}parse(v,f){let e=v.split(`
`),t={},n=/\s+/,a={};for(let i=0;i<e.length;i++){let s=e[i];if(s=s.trim(),s.length===0||s.charAt(0)==="#")continue;let c=s.indexOf(" "),o=c>=0?s.substring(0,c):s;o=o.toLowerCase();let h=c>=0?s.substring(c+1):"";if(h=h.trim(),o==="newmtl")t={name:h},a[h]=t;else if(o==="ka"||o==="kd"||o==="ks"||o==="ke"){let l=h.split(n,3);t[o]=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])]}else t[o]=h}let r=new Q(this.resourcePath||f,this.materialOptions);return r.setCrossOrigin(this.crossOrigin),r.setManager(this.manager),r.setMaterials(a),r}},Q=class{constructor(v="",f={}){this.baseUrl=v,this.options=f,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:e0,this.wrap=this.options.wrap!==void 0?this.options.wrap:T}setCrossOrigin(v){return this.crossOrigin=v,this}setManager(v){this.manager=v}setMaterials(v){this.materialsInfo=this.convert(v),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(v){if(!this.options)return v;let f={};for(let e in v){let t=v[e],n={};f[e]=n;for(let a in t){let r=!0,i=t[a],s=a.toLowerCase();switch(s){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(i=[i[0]/255,i[1]/255,i[2]/255]),this.options&&this.options.ignoreZeroRGBs&&i[0]===0&&i[1]===0&&i[2]===0&&(r=!1);break;default:break}r&&(n[s]=i)}}return f}preload(){for(let v in this.materialsInfo)this.create(v)}getIndex(v){return this.nameLookup[v]}getAsArray(){let v=0;for(let f in this.materialsInfo)this.materialsArray[v]=this.create(f),this.nameLookup[f]=v,v++;return this.materialsArray}create(v){return this.materials[v]===void 0&&this.createMaterial_(v),this.materials[v]}createMaterial_(v){let f=this,e=this.materialsInfo[v],t={name:v,side:this.side};function n(r,i){return typeof i!="string"||i===""?"":/^https?:\/\//i.test(i)?i:r+i}function a(r,i){if(t[r])return;let s=f.getTextureParams(i,t),c=f.loadTexture(n(f.baseUrl,s.url));c.repeat.copy(s.scale),c.offset.copy(s.offset),c.wrapS=f.wrap,c.wrapT=f.wrap,(r==="map"||r==="emissiveMap")&&(c.colorSpace=O),t[r]=c}for(let r in e){let i=e[r],s;if(i!=="")switch(r.toLowerCase()){case"kd":t.color=new C().fromArray(i).convertSRGBToLinear();break;case"ks":t.specular=new C().fromArray(i).convertSRGBToLinear();break;case"ke":t.emissive=new C().fromArray(i).convertSRGBToLinear();break;case"map_kd":a("map",i);break;case"map_ks":a("specularMap",i);break;case"map_ke":a("emissiveMap",i);break;case"norm":a("normalMap",i);break;case"map_bump":case"bump":a("bumpMap",i);break;case"map_d":a("alphaMap",i),t.transparent=!0;break;case"ns":t.shininess=parseFloat(i);break;case"d":s=parseFloat(i),s<1&&(t.opacity=s,t.transparent=!0);break;case"tr":s=parseFloat(i),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(t.opacity=1-s,t.transparent=!0);break;default:break}}return this.materials[v]=new F(t),this.materials[v]}getTextureParams(v,f){let e={scale:new q(1,1),offset:new q(0,0)},t=v.split(/\s+/),n;return n=t.indexOf("-bm"),n>=0&&(f.bumpScale=parseFloat(t[n+1]),t.splice(n,2)),n=t.indexOf("-s"),n>=0&&(e.scale.set(parseFloat(t[n+1]),parseFloat(t[n+2])),t.splice(n,4)),n=t.indexOf("-o"),n>=0&&(e.offset.set(parseFloat(t[n+1]),parseFloat(t[n+2])),t.splice(n,4)),e.url=t.join(" ").trim(),e}loadTexture(v,f,e,t,n){let a=this.manager!==void 0?this.manager:h0,r=a.getHandler(v);r===null&&(r=new U(a)),r.setCrossOrigin&&r.setCrossOrigin(this.crossOrigin);let i=r.load(v,e,t,n);return f!==void 0&&(i.mapping=f),i}};var j0="../../assets/obj/windmill_001-XQOMCDYN.obj";var M0="../../assets/mtl/windmill_001-RVADYG7F.mtl";var C0=A({name:"ThreeJsFundamentals",setup(){let g=v0(),v=t0(),f=new c0,e=new r0(45,3/2,.1,500),t=new u0(16777215,2.5),n=new p0(11657727,12155424,2);e.position.set(0,10,35),t.position.set(0,10,0),t.target.position.set(-5,0,0),t.castShadow=!0,f0(()=>{let s=new o0(40,40);new U().load(b0,l=>{l.colorSpace=O,l.wrapS=T,l.wrapT=T,l.magFilter=i0,l.repeat.set(40/2,40/2);let m=new F({map:l,side:s0}),p=new V(s,m);p.rotation.x=-.5*Math.PI,p.receiveShadow=!0,f.add(p)}),new G().load(M0,l=>{l.preload();let m=new D;m.setMaterials(l),m.load(j0,p=>{f.add(p)})}),v.value=new l0({antialias:!0,canvas:g.value}),v.value.shadowMap.enabled=!0,v.value.setPixelRatio(10),f.add(n,t),f.background=new C(0);let h=new g0(e,g.value);h.target.set(0,5,0),h.update(),requestAnimationFrame(a)});let a=()=>{v.value.render(f,e),requestAnimationFrame(a)},r=()=>{};return()=>L(E,null,L(d0,{showAnimation:!1},{canvas:()=>L("canvas",{class:w0("gl-canvas"),ref:g})}))}});function E0(g){let v=Object.assign({h1:"h1",code:"code",h2:"h2",ul:"ul",li:"li",p:"p"},K(),g.components);return u.h(u.Fragment,null,u.h(v.h1,null,"\u4F7F\u7528",u.h(v.code,null,".obj"),"\u548C",u.h(v.code,null,".gltf"),"\u6587\u4EF6\u52A0\u8F7D",u.h(v.code,null,"3D"),"\u6A21\u578B"),`
`,u.h(v.h2,null,"\u4F7F\u7528",u.h(v.code,null,".obj"),"\u6587\u4EF6"),`
`,u.h(C0),`
`,u.h(v.h2,null,"\u4F7F\u7528",u.h(v.code,null,".gltf"),"\u6587\u4EF6"),`
`,u.h(v.ul,null,`
`,u.h(v.li,null,`
`,u.h(v.p,null,u.h(v.code,null,"gltf"),"\u683C\u5F0F\u7684\u4F18\u70B9\uFF1A"),`
`,u.h(v.ul,null,`
`,u.h(v.li,null,"\u4F53\u79EF\u5C0F\uFF0C\u9002\u5408\u7528\u4E8E\u4F20\u8F93"),`
`,u.h(v.li,null,"\u6613\u4E8E\u88AB\u6E32\u67D3"),`
`),`
`),`
`))}function P0(g={}){let{wrapper:v}=Object.assign({},K(),g.components);return v?u.h(v,g,u.h(E0,g)):E0(g)}var Y=P0;var m1=A({name:"MDX_05-USE-OBJ-AND-GLTF",components:{MDXComponentContext:Y},setup(g,v){return()=>L("div",{class:"markdown-body",style:"padding: 15px;"},L(Y,{...v?.attrs}))}});export{m1 as default};
